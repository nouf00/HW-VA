"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.DependsOnMethod = void 0;
const errors_1 = require("./errors");
class DependsOnMethod {
    constructor(methods) {
        this.methods = methods;
        Object.keys(methods).forEach((key) => {
            if (key in methods) {
                const endpointMethods = methods[key]?.getMethods() || [];
                if (!endpointMethods.includes(key)) {
                    throw new errors_1.DependsOnMethodError(`The endpoint assigned to the '${key}' parameter must have at least this method in its specification.\n` +
                        "This error should prevent mistakes during the development process.\n" +
                        "Example:\n\n" +
                        `new ${this.constructor.name}({\n` +
                        `  ${key}: endpointsFactory.build({\n` +
                        `    methods: ['${key}', ` +
                        ((methods[key]?.getMethods() || [])
                            .map((m) => `'${m}'`)
                            .join(", ") || "...") +
                        "]\n" +
                        `    // or method: '${key}'\n` +
                        "    ...\n" +
                        "  })\n" +
                        "});\n");
                }
            }
        });
    }
}
exports.DependsOnMethod = DependsOnMethod;
//# sourceMappingURL=depends-on-method.js.map