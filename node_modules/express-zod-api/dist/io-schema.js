"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getFinalEndpointInputSchema = void 0;
const metadata_1 = require("./metadata");
/**
 * @description intersects input schemas of middlewares and the endpoint
 * @since 07.03.2022 former combineEndpointAndMiddlewareInputSchemas()
 */
const getFinalEndpointInputSchema = (middlewares, input) => {
    const result = middlewares
        .map(({ input: schema }) => schema)
        .concat(input)
        .reduce((acc, schema) => acc.and(schema));
    for (const middleware of middlewares) {
        (0, metadata_1.copyMeta)(middleware.input, result);
    }
    (0, metadata_1.copyMeta)(input, result);
    return result;
};
exports.getFinalEndpointInputSchema = getFinalEndpointInputSchema;
//# sourceMappingURL=io-schema.js.map