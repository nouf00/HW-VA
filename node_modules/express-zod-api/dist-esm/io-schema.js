import { copyMeta } from "./metadata.js";
/**
 * @description intersects input schemas of middlewares and the endpoint
 * @since 07.03.2022 former combineEndpointAndMiddlewareInputSchemas()
 */
export const getFinalEndpointInputSchema = (middlewares, input) => {
    const result = middlewares
        .map(({ input: schema }) => schema)
        .concat(input)
        .reduce((acc, schema) => acc.and(schema));
    for (const middleware of middlewares) {
        copyMeta(middleware.input, result);
    }
    copyMeta(input, result);
    return result;
};
//# sourceMappingURL=io-schema.js.map